<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Contact</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
</head>
<body>

    <main>
        <section class="glass">
            <!-- user dashboard -->
          <div class="dashboard">
            <div class="user">
              <img src="./images/avatar.png" alt="" />
              <h3>J Magwaxaza</h3>
            </div>
            <div class="links">
              <div class="link">
                <button id="homeLink" type="button"><h2>Home</h2></button> 
              </div>
            </div>
            
          </div>
          <div class="contacts">
            <div class="status">
              <h1>Add Contact</h1>
            </div>
  
            <div class="cards">
               <div id="show">
                   <!-- add contact information form -->
                <form id="aditForm">
                    <label for="firstname">First Name</label>
                    <input type="text" name="firstname" id="firstname"><br/>
                    <label for="lastname">Last Name</label>
                    <input type="text" name="lastname" id="lastname"><br/>
                    <label for="mobile">Mobile</label>
                    <input type="text" name="mobile" id="mobile"><br/>
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email"><br/>
                    <label for="avatar">Select a file</label>
                    <input type="file" id="avatar"><br/>
                    <button type="submit" id="submitForm"><h2>Submit</h2></button>
                </form>
               </div>
            </div>
  
          </div>
        </section>
      </main>

    <script src="config.js"></script>
    <script>
        document.getElementById("submitForm").addEventListener("click", submitForm);
        document.getElementById("homeLink").addEventListener("click", homeLink);

        // submit form information
        function submitForm(e){
           e.preventDefault();

           const form = new FormData(document.querySelector('aditForm'));
           form.append('apikey', apikey);

        //    post form data to a server
            fetch(rootPath + "controller/insert-contact/", {
                method: "POST",
                headers: {"Accept": "application/json, *.*"},
                body: form
            })
            .then((response) =>{
                return response.text();
            })
            .then((data) =>{
                if(data == "1"){
                    alert("Contact added.")
                    homeLink();
                }else{
                    alert(data);
                    homeLink();
                }
            })
       }

    //    go to home page
        function homeLink(){
            window.open("index.html", "_self");
        }

    </script>
</body>
</html>